{
  "app": "npx ts-node --prefer-ts-exts bin/cdk.ts",
  "assetMetadata": false,
  "pathMetadata": false,
  "versionReporting": false,
  "watch": {
    "include": [
      "**"
    ],
    "exclude": [
      "README.md",
      "cdk*.json",
      "**/*.d.ts",
      "**/*.js",
      "tsconfig.json",
      "package*.json",
      "yarn.lock",
      "node_modules",
      "test"
    ]
  },
  "context": {
    "dev-test": {
      "stackName": "Dev",
      "utilsHostname": "utils",
      "ecs": {
        "taskCpu": 2048,
        "taskMemory": 4096,
        "desiredCount": 1,
        "enableDetailedLogging": true,
        "enableEcsExec": true
      },
      "containers": {
        "weather-proxy": {
          "enabled": true,
          "path": "/weather-radar",
          "healthCheckPath": "/weather-radar/health",
          "port": 3000,
          "cpu": 256,
          "memory": 512,
          "priority": 1,
          "imageTag": "v1.2.0"
        },
        "ais-proxy": {
          "enabled": true,
          "path": "/ais-proxy",
          "healthCheckPath": "/ais-proxy/health",
          "port": 3000,
          "cpu": 256,
          "memory": 512,
          "priority": 2,
          "imageTag": "v1.1.0"
        },
        "power-outages": {
          "enabled": true,
          "path": "/power-outages",
          "healthCheckPath": "/power-outages/health",
          "port": 3000,
          "cpu": 256,
          "memory": 512,
          "priority": 3,
          "imageTag": "v1.1.1"
        },

        "tileserver-gl": {
          "enabled": true,
          "hostname": "tiles",
          "healthCheckPath": "/health",
          "port": 8080,
          "cpu": 2048,
          "memory": 4096,
          "priority": 4,
          "imageTag": "v1.2.0",
          "mbtilesMulti": {
            "enabled": true,
            "files": [
              {
                "s3Key": "nz_nationalmap_emergency.mbtiles",
                "filename": "nz_nationalmap_emergency.mbtiles"
              },
              {
                "s3Key": "linz-vector-tiles.mbtiles",
                "filename": "linz-vector-tiles.mbtiles"
              }
            ]
          }
        }
      },
      "general": {
        "removalPolicy": "DESTROY",
        "enableDetailedLogging": true
      },
      "docker": {
        "usePreBuiltImages": false
      },
      "cloudfront": {
        "tileserver": {
          "enabled": true,
          "cacheTtl": {
            "tiles": "30d",
            "metadata": "1h",
            "health": "0s"
          }
        }
      }
    },
    "prod": {
      "stackName": "Prod",
      "utilsHostname": "utils",
      "ecs": {
        "taskCpu": 2048,
        "taskMemory": 4096,
        "desiredCount": 1,
        "enableDetailedLogging": false,
        "enableEcsExec": false
      },
      "containers": {
        "weather-proxy": {
          "enabled": true,
          "path": "/weather-radar",
          "healthCheckPath": "/weather-radar/health",
          "port": 3000,
          "cpu": 512,
          "memory": 1024,
          "priority": 1,
          "imageTag": "v1.2.0"
        },
        "ais-proxy": {
          "enabled": true,
          "path": "/ais-proxy",
          "healthCheckPath": "/ais-proxy/health",
          "port": 3000,
          "cpu": 512,
          "memory": 1024,
          "priority": 2,
          "imageTag": "v1.1.0"
        },
        "power-outages": {
          "enabled": true,
          "path": "/power-outages",
          "healthCheckPath": "/power-outages/health",
          "port": 3000,
          "cpu": 512,
          "memory": 1024,
          "priority": 3,
          "imageTag": "v1.1.1"
        },

        "tileserver-gl": {
          "enabled": true,
          "hostname": "tiles",
          "healthCheckPath": "/health",
          "port": 8080,
          "cpu": 2048,
          "memory": 4096,
          "priority": 4,
          "imageTag": "v1.2.0",
          "mbtilesMulti": {
            "enabled": true,
            "files": [
              {
                "s3Key": "nz_nationalmap_emergency.mbtiles",
                "filename": "nz_nationalmap_emergency.mbtiles"
              },
              {
                "s3Key": "linz-vector-tiles.mbtiles",
                "filename": "linz-vector-tiles.mbtiles"
              }
            ]
          }
        }
      },
      "general": {
        "removalPolicy": "RETAIN",
        "enableDetailedLogging": false
      },
      "docker": {
        "usePreBuiltImages": true
      },
      "cloudfront": {
        "tileserver": {
          "enabled": true,
          "cacheTtl": {
            "tiles": "30d",
            "metadata": "1h",
            "health": "0s"
          }
        }
      }
    },
    "utils-infra-defaults": {
      "project": "TAK.NZ",
      "component": "UtilsInfra",
      "region": "ap-southeast-2"
    },
    "@aws-cdk/aws-lambda:recognizeLayerVersion": true,
    "@aws-cdk/core:checkSecretUsage": true,
    "@aws-cdk/core:target-partitions": [
      "aws",
      "aws-us-gov"
    ],
    "@aws-cdk-containers/ecs-service-extensions:enableDefaultLogDriver": true,
    "@aws-cdk/aws-ec2:uniqueImdsv2TemplateName": true,
    "@aws-cdk/aws-ecs:arnFormatIncludesClusterName": true,
    "@aws-cdk/aws-iam:minimizePolicies": true,
    "@aws-cdk/core:validateSnapshotRemovalPolicy": true,
    "@aws-cdk/aws-codepipeline:crossAccountKeyAliasStackSafeResourceName": true,
    "@aws-cdk/aws-s3:createDefaultLoggingPolicy": true,
    "@aws-cdk/aws-sns-subscriptions:restrictSqsDescryption": true,
    "@aws-cdk/aws-apigateway:disableCloudWatchRole": true,
    "@aws-cdk/core:enablePartitionLiterals": true,
    "@aws-cdk/aws-events:eventsTargetQueueSameAccount": true,
    "@aws-cdk/aws-iam:standardizedServicePrincipals": true,
    "@aws-cdk/aws-ecs:disableExplicitDeploymentControllerForCircuitBreaker": true,
    "@aws-cdk/aws-ec2:noSubnetRouteTableId": true,
    "@aws-cdk/aws-rds:instancePerformanceInsightsOverridden": true,
    "@aws-cdk/aws-ecs:minHealthyPercent": true,
    "@aws-cdk/aws-iam:importedRoleStackSafeDefaultPolicyName": true,
    "@aws-cdk/aws-s3:serverAccessLogsUseBucketPolicy": true,
    "@aws-cdk/aws-route53-patters:useCertificate": true,
    "@aws-cdk/customresources:installLatestAwsSdkDefault": false,
    "@aws-cdk/aws-rds:databaseProxyUniqueResourceName": true,
    "@aws-cdk/aws-codedeploy:removeAlarmsFromDeploymentGroup": true,
    "@aws-cdk/aws-apigateway:authorizerChangeDeploymentLogicalId": true,
    "@aws-cdk/aws-ec2:launchTemplateDefaultUserData": true,
    "@aws-cdk/aws-secretsmanager:useAttachedSecretResourcePolicyForSecretTargetAttachments": true,
    "@aws-cdk/aws-redshift:columnId": true,
    "@aws-cdk/aws-stepfunctions-tasks:enableEmrServicePolicyV2": true,
    "@aws-cdk/aws-ec2:restrictDefaultSecurityGroup": true,
    "@aws-cdk/aws-apigateway:requestValidatorUniqueId": true,
    "@aws-cdk/aws-kms:aliasNameRef": true,
    "@aws-cdk/aws-autoscaling:generateLaunchTemplateInsteadOfLaunchConfig": true,
    "@aws-cdk/core:includePrefixInUniqueNameGeneration": true,
    "@aws-cdk/aws-efs:denyAnonymousAccess": true,
    "@aws-cdk/aws-opensearchservice:enableOpensearchMultiAzWithStandby": true,
    "@aws-cdk/aws-lambda-nodejs:useLatestRuntimeVersion": true,
    "@aws-cdk/aws-ec2:ebsDefaultGp3Volume": true,
    "@aws-cdk/aws-efs:mountTargetOrderInsensitiveLogicalId": true,
    "@aws-cdk/aws-codepipeline:defaultPipelineTypeToV2": true,
    "@aws-cdk/aws-kms:reduceCrossAccountRegionPolicyScope": true,
    "@aws-cdk/aws-eks:nodegroupNameAttribute": true,
    "@aws-cdk/aws-ec2:attributeDefaultSSMDocument": true,
    "@aws-cdk/core:bootstrapQualifier": "hnb659fds",
    "@aws-cdk/aws-lambda:recognizeVersionProps": true,
    "@aws-cdk/aws-cloudfront:defaultSecurityPolicyTLSv1.2_2021": true,
    "@aws-cdk/aws-eks:defaultCapacityType": "SPOT",
    "@aws-cdk/aws-ecs-patterns:removeDefaultDesiredCount": true,
    "@aws-cdk/aws-rds:auroraClusterChangeScopeOfInstanceParameterGroupWithEachParameters": true,
    "@aws-cdk/aws-appsync:useArnForSourceApiAssociationIdentifier": true,
    "@aws-cdk/aws-rds:preventRenderingDeprecatedCredentials": true,
    "@aws-cdk/aws-codepipeline-actions:useNewDefaultBranchForCodeCommitSource": true,
    "@aws-cdk/aws-cloudwatch-actions:changeLambdaPermissionLogicalIdForLambdaAction": true,
    "@aws-cdk/aws-codepipeline:crossAccountKeysDefaultValueToFalse": true,
    "@aws-cdk/aws-ecs:removeDefaultDeploymentAlarm": true,
    "@aws-cdk/custom-resources:logApiResponseDataPropertyTrueDefault": false,
    "@aws-cdk/aws-s3:keepNotificationInImportedBucket": false,
    "@aws-cdk/aws-ecs:enableImdsBlockingDeprecatedFeature": false,
    "@aws-cdk/aws-ecs:disableEcsImdsBlocking": true,
    "@aws-cdk/aws-ecs:reduceEc2FargateCloudWatchPermissions": true,
    "@aws-cdk/aws-dynamodb:resourcePolicyPerReplica": true,
    "@aws-cdk/aws-ec2:ec2SumTImeoutEnabled": true,
    "@aws-cdk/aws-appsync:appSyncGraphQLAPIScopeLambdaPermission": true,
    "@aws-cdk/aws-rds:setCorrectValueForDatabaseInstanceReadReplicaInstanceResourceId": true,
    "@aws-cdk/core:cfnIncludeRejectComplexResourceUpdateCreatePolicyIntrinsics": true,
    "@aws-cdk/aws-lambda-nodejs:sdkV3ExcludeSmithyPackages": true,
    "@aws-cdk/aws-stepfunctions-tasks:fixRunEcsTaskPolicy": true,
    "@aws-cdk/aws-ec2:bastionHostUseAmazonLinux2023ByDefault": true,
    "@aws-cdk/aws-route53-targets:userPoolDomainNameMethodWithoutCustomResource": true,
    "@aws-cdk/aws-elasticloadbalancingV2:albDualstackWithoutPublicIpv4SecurityGroupRulesDefault": true,
    "@aws-cdk/aws-iam:oidcRejectUnauthorizedConnections": true,
    "@aws-cdk/core:enableAdditionalMetadataCollection": true,
    "@aws-cdk/aws-lambda:createNewPoliciesWithAddToRolePolicy": false,
    "@aws-cdk/aws-s3:setUniqueReplicationRoleName": true,
    "@aws-cdk/aws-events:requireEventBusPolicySid": true,
    "@aws-cdk/core:aspectPrioritiesMutating": true,
    "@aws-cdk/aws-dynamodb:retainTableReplica": true,
    "@aws-cdk/aws-stepfunctions:useDistributedMapResultWriterV2": true,
    "@aws-cdk/s3-notifications:addS3TrustKeyPolicyForSnsSubscriptions": true,
    "@aws-cdk/aws-ec2:requirePrivateSubnetsForEgressOnlyInternetGateway": true,
    "@aws-cdk/aws-s3:publicAccessBlockedByDefault": true
  }
}